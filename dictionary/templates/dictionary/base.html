{% spaceless %}
<!doctype html>
<html lang="tr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    {% load static %}
    {% load functions %}

    <link rel="shortcut icon" type="image/png" href="{% static 'dictionary/img/favicon.ico' %}"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static "dictionary/css/style.css" %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700&display=swap">

    <script defer src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script defer src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
    <script defer src="{% static 'dictionary/js/vendor/jquery.autocomplete.min.js' %}"></script>
    <script defer src="{% static 'dictionary/js/djdict.js' %}"></script>

    <title>{% block supertitle %}{% block title %}{% endblock %} - {{ request.site.name }}{% endblock %}</title>
</head>
<body {% block bodyattr %}class="default topic-entry-view"{% endblock %} id="{{ user.is_authenticated|yesno:"au,ua" }}">
{% include "dictionary/includes/icons.svg" %}

<header class="page_header">

    <div class="container">
        <div class="small-device-alert">cihaz çok küçük!</div>

        <div class="top-bar">

            <button class="content-skipper" data-text-identifier="ana içerik" data-href="#main" id="skipper-main-menu">Ana içeriğe git.<small>bu menü caps lock tuşuyla açılır.</small></button>
            <button class="content-skipper" data-text-identifier="başlık listesi" data-href="#left-frame-nav">Başlık listesine git.<small>bu menü caps lock tuşuyla açılır.</small></button>
            <button class="content-skipper" data-text-identifier="ek içerik" data-href="#right-frame">Ek içeriğe git.<small>bu menü caps lock tuşuyla açılır.</small></button>

            {# <!--- logo --> #}
            <div class="logo">
                <a aria-label="Sözlük ana sayfası" href="{% url 'home' %}"></a>
            </div>

            {# HAYVAN-ARA #}
            <form method="GET" class="header-search-form" action="{% url 'topic-search' %}" id="header_search_form">
                <div class="input-group searchbox">
                    <input name="q" type="text" placeholder="başlık, #entry ya da @yazar" class="searchbox-text form-control" id="header_search" form="header_search_form" aria-label="Arama terimi">
                    <div class="input-group-append">

                        <button type="button" class="btn dropbtn dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span class="sr-only">gelişmiş arama diyaloğunu aç</span>
                        </button>

                        <button class="btn searchbtn" type="submit" title="arama yap">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="24" viewBox="0 0 16 16">
                                <use href="#search"></use>
                            </svg>
                        </button>

                        <div class="dropdown-menu dropdown-menu-right dropdown-advanced-search p-0">
                            <div class="px-3 py-2">
                                {% include "dictionary/includes/forms/extended_search.html" with source="dropdown" %}
                                <div class="form-group">
                                    <button type="button" class="btn btn-django stretch" id="perform_advanced_search">çok güzel ara</button>
                                </div>
                                <a role="button" tabindex="0" class="dropdown-item text-center search-closer" id="close_search_dropdown">boşver</a>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            {# HAYVAN-ARA #}

            {# <!--- user navigation --> #}


            {% if user.is_authenticated %}
                <ul class="user-navigation d-inline-flex align-items-start pl-0 m-0">
                    <li>
                        <a class="nav-quicklink" href="{{ user.get_absolute_url }}" aria-label="profilim">
                            <svg fill="currentColor" width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                <use href="#person"></use>
                            </svg>
                            <span>ben</span>
                        </a>
                    </li>


                    <li {% if user.unread_message_count > 0 %}class="new"{% endif %}>
                        <a class="nav-quicklink" href="{% url 'messages' %}" aria-label="mesajlar">
                            {% if user.unread_message_count > 0 %}
                                <div class="badge badge-light user-badge">{{ user.unread_message_count }}</div>
                            {% endif %}
                            <svg style="transform: scaleX(-1);" fill="currentColor" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <use href="#chat"></use>
                            </svg>
                            <span class="ml-2">mesaj</span>
                        </a>
                    </li>

                    <li {% if user.unread_topic_count.sum > 0 %}class="new"{% endif %}>
                        <a class="nav-quicklink" aria-label="takip ettiğim başlıklar" href="{% url 'activity' %}">
                            {% if user.unread_topic_count.sum > 0 %}
                                <div class="badge badge-light user-badge">{{ user.unread_topic_count.sum }}</div>
                            {% endif %}
                            <svg fill="currentColor" width="24" height="24" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                <use href="#bell"></use>
                            </svg>
                            <span>olay</span>
                        </a>
                    </li>


                    <li class="desktop-only">
                        <a data-toggle="dropdown" role="button" tabindex="0" aria-haspopup="true" aria-label="Hesap Menüsü">
                            <svg width="16" height="24" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                                <use href="#more"></use>
                            </svg>


                            <div class="user-dropdown dropdown-menu dropdown-menu-right" aria-labelledby="user-dropdown">
                                <a class="dropdown-item" href="{% url 'category_list' %}">kanallar</a>
                                <a class="dropdown-item" href="{% url 'user_preferences' %}">ayarlar</a>
                                <a class="dropdown-item" href="{% url 'people' %}">takip/engellenmiş</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="{% url 'logout' %}">terk</a>
                            </div>

                    </li>

                </ul>


            {% else %}
                <nav class="usermenu" aria-label="Kullanıcı menüsü">
                    <ul>
                        <li><a href="{% url 'login' %}">giriş yap</a></li>
                        <li><a href="{% url 'register' %}">kayıt ol</a></li>
                    </ul>
                </nav>
            {% endif %}

        </div>

        {# <!--- categories and mobile navigation --> #}
        <nav class="sub-nav" aria-label="Kategori menüsü">
            <ul class="mobile-only">
                {% render_header_link "today" %}
                {% render_header_link "popular" %}
                {% render_header_link "top" %}
                {% render_header_link "today-in-history" %}
                {% render_header_link "acquaintances" %}

                {% if user.is_authenticated %}
                    <li id="usermenu_mobile" data-toggle="dropdown">
                        <svg width="16" height="24" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                            <use href="#more"></use>
                            <title>Kullanıcı menüsü</title>
                        </svg>
                    </li>

                    <div class="usermenu-dropdown dropdown-menu dropdown-menu-right" aria-labelledby="usermenu_mobile">
                        <a href="{% url "category_list" %}" class="dropdown-item">kanallar</a>
                        <a href="{% url "topic_list" slug="drafts" %}" class="dropdown-item">kenar</a>
                        <a href="{% url "topic_list" slug="wishes" %}" class="dropdown-item">ukteler</a>
                        <a href="{% url "topic_list" slug="followups" %}" class="dropdown-item">son</a>
                        <a href="{% url "topic_list" slug="novices" %}" class="dropdown-item">çaylaklar</a>
                        <a href="{% url "topic_list" slug="search" %}" class="dropdown-item">hayvan ara</a>
                        <a href="{% url "user_preferences" %}" class="dropdown-item">ayarlar</a>
                        <a href="{% url "people" %}" class="dropdown-item">takip/engellenmiş</a>
                        <div class="dropdown-divider"></div>
                        <a href="{% url "logout" %}" class="dropdown-item">terk</a>
                    </div>

                {% else %}
                    <li>
                        <a href="{% url 'login' %}">giriş yap</a>
                    </li>
                    <li>
                        <a href="{% url 'register' %}">kayıt ol</a>
                    </li>
                {% endif %}
            </ul>

            <ul class="desktop-only">

                {% render_header_link 'today' %}
                {% render_header_link 'popular' %}
                {% render_header_link 'top' %}
                {% render_header_link 'acquaintances' %}
                {% render_header_link 'drafts' %}
                {% render_header_link 'followups' %}
                {% render_header_link 'wishes' %}
                {% render_header_link 'novices' %}
                {% render_header_link 'today-in-history' %}

                {% for category in nav_categories|slice:":4" %}
                    <li {% if left_frame.slug == category.slug %}class="active"{% endif %} data-lf-slug="{{ category.slug }}">
                        <a href="{{ category.get_absolute_url }}" title="{{ category.description }}">#{{ category.name }}</a>
                    </li>
                {% endfor %}

                <li class="key-clickable" id="category-expand" data-toggle="dropdown" tabindex="0" aria-haspopup="true" aria-label="Diğer Kanallar">
                    <svg width="16" height="24" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
                        <use href="#more"></use>
                    </svg>
                </li>

                <div class="more_tags_dropdown dropdown-menu dropdown-menu-right" aria-labelledby="category-expand">

                    {% for category in nav_categories|slice:"4:12" %}
                        <a title="{{ category.description }}" data-lf-slug="{{ category.slug }}" class="dropdown-item{% if left_frame.slug == category.slug %} active{% endif %}" href="{{ category.get_absolute_url }}">#{{ category.name }}</a>
                    {% endfor %}

                    <div class="dropdown-divider"></div>
                    <a title="herhangi bir kanala ait olmayan başlıklar" class="dropdown-item{% if left_frame.slug == "uncategorized" %} active{% endif %}" data-lf-slug="uncategorized" href="{% url 'topic_list' slug='uncategorized' %}">başıboşlar</a>
                    <a href="{% url 'category_list' %}" class="dropdown-item regular">tüm kanallar</a>
                </div>
            </ul>
        </nav>
    </div>

</header>


{#<!-- content -->#}


<div class="container content">

    <aside class="left-frame" id="left-frame-nav" aria-label="Başlık listesi">
        {% if request.is_mobile %}
            <h2>hay aksi!</h2>
            <p>bir şeyler yanlış gitti. sayfayı yenilemeyi deneyin</p>
        {% else %}
            {% include "dictionary/includes/left_frame.html" %}
        {% endif %}
    </aside>


    {# page content #}
    <main class="content-frame" id="main">
        {% block content %}{% endblock %}
    </main>


    <aside class="right-frame" id="right-frame">
        {% block rightframe %}{% endblock %}

        {% load cache %}

        {% cache None footer user.is_authenticated %}
            {% load filters %}
            {% load flatpages %}
            {% get_flatpages for user as flatpages %}
            {% get_external_urls as external_urls %}

            <footer class="body-footer">
                <h2 class="h5">{{ request.site.name }}</h2>
                <ul>
                    <li><a href="{% url 'general-report' %}">iletişim formu</a></li>
                    <li><a href="{% url 'announcements-index' %}">sözlük duyuruları</a></li>
                    {% for page in flatpages|order_by:"-metaflatpage__weight url" %}
                        <li><a href="{{ page.url }}">{{ page.title }}</a></li>
                    {% endfor %}

                    {% for external in external_urls %}
                        <li><a href="{{ external.url }}" target="_blank" rel="noopener">{{ external.name }}</a></li>
                    {% endfor %}
                </ul>
            </footer>
        {% endcache %}

        {% include "dictionary/includes/devinfo.html" %}
    </aside>

</div>

<ul class="d-none" id="request-messages" data-has-messages="{{ messages|yesno:'true,false' }}">
    {% for message in messages %}
        <li data-message="{{ message }}" data-level="{% get_message_level message.level %}" data-extra="{{ message.extra_tags }}"></li>
    {% endfor %}
</ul>
<div class="toast-holder" aria-live="polite"></div>

</body>
</html>
{% endspaceless %}